---
apiVersion: v1
kind: team
spec:
  team:
    name: Apples
    agent_options:
      options:
        distributed_interval: 3
        distributed_tls_max_attempts: 3
        logger_plugin: tls
        logger_tls_endpoint: /api/v1/osquery/log
        logger_tls_period: 10
      decorators:
        load:
          - "SELECT version FROM osquery_info"
          - "SELECT uuid AS host_uuid FROM system_info"
        always:
          - "SELECT user AS username FROM logged_in_users WHERE user <> '' ORDER BY time LIMIT 1"
        interval:
          3600: "SELECT total_seconds AS uptime FROM uptime"
    secrets:
    - secret: applessecret
---
apiVersion: v1
kind: team
spec:
  team:
    name: Oranges
    agent_options:
      options:
        distributed_interval: 3
        distributed_tls_max_attempts: 3
        logger_plugin: tls
        logger_tls_endpoint: /api/v1/osquery/log
        logger_tls_period: 10
      decorators:
        load:
          - "SELECT version FROM osquery_info"
          - "SELECT uuid AS host_uuid FROM system_info"
        always:
          - "SELECT user AS username FROM logged_in_users WHERE user <> '' ORDER BY time LIMIT 1"
        interval:
          3600: "SELECT total_seconds AS uptime FROM uptime"
    secrets:
      - secret: orangessecret
---
apiVersion: v1
kind: enroll_secret
spec:
  secrets:
    - secret: RzTlxPvugG4o4O5IKS/HqEDJUmI1hwBoffff
---
apiVersion: v1
kind: user_roles
spec:
  roles:
    anna@example.com:
      global_role: admin
      teams: null
    mary@example.com
      global_role: maintainer
      teams: null
    oliver@example.com
      global_role: observer
      teams: null
    marco@example.com
      global_role: null
      teams:
        - team: Apples
          role: maintainer
        - team: Oranges
          role: observer
