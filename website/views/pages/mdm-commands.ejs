<div id="mdm-commands-page" v-cloak>
  <div purpose="page-container">
    <div purpose="page-content">
      <docs-nav-and-search  current-section="controls" :algolia-public-key="algoliaPublicKey" ></docs-nav-and-search>
      <div purpose="platform-filters" class="d-flex justify-content-center"  >
        <div purpose="platform-filter" :class="[selectedPlatform === 'apple' ? 'selected' : '']+' '+[bowser.windows ? 'order-2' : '']" class="d-flex flex-row justify-content-center align-items-center" @click="clickSelectPlatform('apple')">
          <h1 class="d-flex align-items-center">
          <img src="/images/os-macos-dark-24x24@2x.png" alt="macOS" class="d-inline">
          <span class="d-none d-md-inline">Apple</span>
          </h1>
        </div>
        <div purpose="platform-filter" :class="[selectedPlatform === 'windows' ? 'selected' : '']+' '+[bowser.windows ? 'order-1' : '']" class="d-flex flex-row justify-content-center align-items-center" @click="clickSelectPlatform('windows')">
          <h1 class="d-flex align-items-center">
            <img src="/images/os-windows-dark-24x24@2x.png" alt="Windows" class="d-inline">
            <span class="d-none d-md-inline">Windows</span>
          </h1>
        </div>
        <div purpose="platform-filter" :class="[selectedPlatform === 'linux' ? 'selected' : '']+' '+[bowser.windows ? 'order-3' : '']"  class="d-flex flex-row justify-content-center align-items-center" @click="clickSelectPlatform('linux')">
          <h1 class="d-flex align-items-center">
            <img src="/images/os-linux-dark-24x24@2x.png" alt="Linux" class="d-inline">
            <span class="d-none d-md-inline">Linux</span>
          </h1>
        </div>
      </div>
      <div purpose="sidebar-and-content">
        <div purpose="sidebar" class="d-lg-flex d-none">
          <a purpose="sidebar-link" class="active" :href="'/mdm-commands#'+selectedPlatform">MDM commands</a>
          <a purpose="sidebar-link" :href="'/scripts#'+selectedPlatform">Scripts</a>
          <a purpose="sidebar-link" :href="'/os-settings#'+selectedPlatform">OS settings</a>
        </div>
        <div class="d-flex d-lg-none">
          <div purpose="mobile-custom-select" class="d-flex flex-row justify-content-between align-items-center" @click="clickOpenTableOfContents()">
            <div><p>Controls</p></div>
            <div><img src="/images/icon-select-arrows-16x16@2x.png" alt="click to open the table of contents"></div>
          </div>
        </div>
        <div purpose="content">
          <div purpose="page-headline">
            <h1>Commands</h1>
            <div purpose="linux-empty-state" v-if="selectedPlatform === 'linux'">
              <p>Linux doesn't support MDM commands, but you can use scripts to perform common device management tasks.</p>
              <a href="/scripts#linux">View recommended scripts for Linux.</a>
            </div>
            <p v-else>A collection of commands you can send to devices. Contributions welcome <a target="_blank" href="https://github.com/fleetdm/fleet/tree/main/docs/mdm-commands.yml">over on GitHub</a>.</p>
          </div>
          <div purpose="platform-content" v-if="selectedPlatform === 'apple'">
            <% for(let category in appleCategories){%>
            <div purpose="category">
            <h2 purpose="command-category"><%= category %></h2>
              <% for(let command of appleCategories[category]){%>
              <div purpose="command" class="d-flex flex-lg-row flex-column justify-content-between">
                <div purpose="command-name-and-description" class="d-flex flex-column">
                  <div class="d-flex flex-column">
                    <p purpose="command-name"><a href="/mdm-commands/<%= command.slug %>"><%- command.name %></a></p>
                  </div>
                  <div purpose="command-description"><p><%- command.description %></p></div>
                  <div purpose="read-more-link"><animated-arrow-button arrow-color="#192147" href="/mdm-commands/<%= command.slug %>">View details</animated-arrow-button></div>
                </div>
              </div>
              <% }%>
            </div>
            <% }%>
          </div>
          <div purpose="platform-content" v-if="selectedPlatform === 'windows'">
            <% for(let category in windowsCategories){%>
            <div purpose="category">
            <h2 purpose="command-category"><%= category %></h2>
              <% for(let command of windowsCategories[category]){%>
              <div purpose="command" class="d-flex flex-lg-row flex-column justify-content-between">
                <div purpose="command-name-and-description" class="d-flex flex-column">
                  <div class="d-flex flex-column">
                    <p purpose="command-name"><a href="/mdm-commands/<%= command.slug %>"><%- command.name %></a></p>
                  </div>
                  <div purpose="command-description"><p><%- command.description %></p></div>
                  <div purpose="read-more-link"><animated-arrow-button arrow-color="#192147" href="/mdm-commands/<%= command.slug %>">View details</animated-arrow-button></div>
                </div>
              </div>
              <% }%>
            </div>
            <% }%>
          </div>

        </div>
      </div>
    </div>
  </div>
  <div purpose="table-of-contents-modal">
    <modal purpose="table-of-contents-modal" v-if="modal === 'table-of-contents'" @close="closeModal()">
      <p purpose="mobile-table-of-contents-header"><strong>Controls</strong></p>
        <div purpose="table-of-contents" class="w-100">
          <div purpose="modal-links">
            <a class="d-block active" purpose="modal-nav-link" :href="'/mdm-commands#'+selectedPlatform">MDM commands</a>
            <a class="d-block" purpose="modal-nav-link" :href="'/scripts#'+selectedPlatform">Scripts</a>
            <a class="d-block" purpose="modal-nav-link" :href="'/os-settings#'+selectedPlatform">OS settings</a>
          </div>
        </div>
    </modal>
  </div>
</div>
<%- /* Expose server-rendered data as window.SAILS_LOCALS :: */ exposeLocalsToBrowser() %>
